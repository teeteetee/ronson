doctype html(lang='en')
head
    meta(charset='utf-8')
    |     
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    |     
    meta(name='viewport', content='width=device-width, initial-scale=1')
    |     
    title Recent ones
    // Bootstrap
    link(href='/bootstrap/css/bootstrap.min.css', rel='stylesheet')
    // HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries
    // WARNING: Respond.js doesn't work if you view the page via file://
    //if lt IE 9
      script(src='https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js')
      |       
      script(src='https://oss.maxcdn.com/respond/1.4.2/respond.min.js')     
    style.
      @font-face {
      font-family:roboto-thin;
      src:url('/bootstrap/fonts/Roboto-Thin.ttf');
      }
      @font-face {
      font-family:high;
      src: url('/bootstrap/fonts/Attentica.ttf');
      }
      @font-face {
      font-family:br;
      src: url('/bootstrap/fonts/bebasneue_regular.ttf');
      }
      @font-face {
      font-family:bt;
      src: url('/bootstrap/fonts/bebasneue_thin.ttf');
      }
      h1 {
      font-family:high;
      font-size:3vw;
      display:inline;
      color:white;
      }
      body {
      min-width:768px;
      background-color:#fff;
      background-image:url('/bootstrap/images/stripe4.png');
      }
      h2 {
      font-size:6vw;
      font-family:br;
      letter-spacing:7px;
      }
      h3 {
      font-size:3vw;
      }
      h4 {
      font-size:1vw;
      font-family:arial;
      letter-spacing:0.3vw;
      text-transform:uppercase;
      color:white;
      }
      h5 {
      letter-spacing:2px;
      text-transform:uppercase;
      font-family:roboto-thin;
      color:white;
      font-size:3vw;
      }  
  body
    nav(class="navbar navbar-inverse navbar-static-top",style='margin-bottom:0px;')
          .container
            .navbar-header
              a(class="navbar-brand" style='padding:5px;' href="/")
                img(alt="Logo",src="/bootstrap/images/rl.png",height='40',width='40')
            .collapse.navbar-collapse#navbar-collapse-9
              ul(class='nav navbar-nav')
                li(class='active')
                  a(href='/admax',style='font-family:high;font-size:20px;letter-spacing:2px;') Админка
    .container(style='min-height:100vh;background-color:white;')
      .row
        .col-xs-12
          ol(class="breadcrumb",style='margin-top:10px;margin-bottom:10px;')
            li
              a(href="/admax") Главная
            li(class="active") Добавить заведение  
      .row(style='padding-top:10px;padding-bottom:10px;text-align:center;') 
        .col-xs-12 
          .btn-group.btn-group-justified(role="group",aria-label="...")
            .btn-group(role="group")
              button(type="button",class="btn btn-default",id='new2') Добавить пустое
            .btn-group(role="group")
              button(type="button",class="btn btn-default",id='new') Добавить без панорамы
            .btn-group(role="group")
              button(type="button",class="btn btn-default",id='new3') Добавить c датой
      #withdate.row(style='padding-top:10px;padding-bottom:10px;text-align:center;background-color:#ddd;display:none;') 
        .col-xs-12
          form(action='/admin/simulateemptyplacewithdate',method='post',role='form')
            .form-group
              .input-group
                span(class="input-group-addon") Дата основания (одним числом) 
                input(type="text",class="form-control",aria-describedby="sizing-addon1",name='founddate',placeholder='20140321')
            .form-group
              .input-group
                span(class="input-group-addon") День регистрации 
                input(type="text",class="form-control",aria-describedby="sizing-addon1",name='regday',placeholder='01')
            .form-group
              .input-group
                span(class="input-group-addon") Месяц регистрации 
                input(type="text",class="form-control",aria-describedby="sizing-addon1",name='regmonth',placeholder='05')
            .form-group
              .input-group
                span(class="input-group-addon") Год регистрации 
                input(type="text",class="form-control",aria-describedby="sizing-addon1",name='regyear',placeholder='2014')
            .form-group
              .input-group
                span(class="input-group-addon") День основания
                input(type="text",class="form-control",aria-describedby="sizing-addon1",name='foundday',placeholder='13')
            .form-group
              .input-group
                span(class="input-group-addon") Месяц основания
                input(type="text",class="form-control",aria-describedby="sizing-addon1",name='foundmonth',placeholder='05')
            .form-group
              .input-group
                span(class="input-group-addon") Год основания
                input(type="text",class="form-control",aria-describedby="sizing-addon1",name='foundyear',placeholder='2014') 
            .form-group(style='text-align:center;')   
              button(class='btn btn-success',type='submit',style='margin-top:20px;border-radius:30px;') Создать 
      //
        .col-xs-6
          form(action='/admin/simulateplace',method='post',style='margin:0px;')  
            button(class='btn btn-primary') Добавить пустое заведение 
        .col-xs-6
          form(action='/admin/simulateemptyplace',method='post',style='margin:0px;')  
            button(class='btn btn-primary') Без панорамы     
      .row
        form(action='/admin/addplace',method='post',role='form', enctype='multipart/form-data')
          .col-xs-12(style='text-align:center;padding-top:10px;padding-bottom:10px;')
            .panel.panel-default
              .panel-heading
                h3(class="panel-title") Информация о заведении
              .panel-body
                .input-group(style='margin-bottom:5px;')
                  span(class="input-group-addon" id="sizing-addon1") Английское название заведения
                  input(type="text" class="form-control" aria-describedby="sizing-addon1" name='placenameen')
                .input-group(style='margin-bottom:5px;')
                  span(class="input-group-addon" id="sizing-addon1") Русское название заведения
                  input(type="text" class="form-control" aria-describedby="sizing-addon1" name='placenameru') 
                .input-group(style='margin-bottom:5px;')
                  span(class="input-group-addon" id="sizing-addon1") Адрес на русском
                  input(type="text" class="form-control" aria-describedby="sizing-addon1" name='adressen')
                .input-group(style='margin-bottom:5px;')
                  span(class="input-group-addon" id="sizing-addon1") Адрес на английском
                  input(type="text" class="form-control" aria-describedby="sizing-addon1" name='adressru') 
                .input-group(style='margin-bottom:5px;')
                  span(class="input-group-addon" id="sizing-addon1") Номер курирующего сотрудника
                  input(type="text" class="form-control" aria-describedby="sizing-addon1" name='mid')
                .input-group(style='margin-bottom:5px;')
                  span(class="input-group-addon" id="sizing-addon1") Номер фотографа
                  input(type="text" class="form-control" aria-describedby="sizing-addon1" name='pid')
            .row(style='text-align:center;padding-top:10px;padding-bottom:10px;')
              .col-xs-12
                .panel.panel-default
                  .panel-heading
                    h3(class="panel-title") Дата открытия
                  .panel-body
                    .col-xs-4
                      .input-group(style='margin-bottom:5px;')
                        span(class="input-group-addon" id="sizing-addon1") День
                        input(type="text" class="form-control" aria-describedby="sizing-addon1" name='day') 
                    .col-xs-4
                      .input-group(style='margin-bottom:5px;')
                        span(class="input-group-addon" id="sizing-addon1") Месяц
                        input(type="text" class="form-control" aria-describedby="sizing-addon1" name='month')
                    .col-xs-4
                      .input-group(style='margin-bottom:5px;')
                        span(class="input-group-addon" id="sizing-addon1") Год
                        input(type="text" class="form-control" aria-describedby="sizing-addon1" name='year') 
            .panel.panel-default
              .panel-heading
                h3(class="panel-title") Файлы
              .panel-body
                .row
                  .col-xs-12(style='text-align:center;margin-top:10px;margin-bottom:10px;')
                    .btn-group.btn-group-justified(role="group",aria-label="...")
                      .btn-group(role="group")
                        button#addfield.btn.btn-default(type='button') Добавить фото
                      .btn-group(role="group")
                        button#addxmlfield.btn.btn-default(type='button') Добавить XML
                      .btn-group(role="group")
                        button#reset.btn.btn-default(type='button') Убрать все поля
                      .btn-group(role="group")
                        button#rmlast.btn.btn-default(type='button') Убрать фото
                      .btn-group(role="group")
                        button#rmlastxml.btn.btn-default(type='button') Убрать XML
                .row
                  #inputs.col-xs-12.zerop
                    .input-group.input-group-lg(style='margin-bottom:5px;')
                      span(class="input-group-addon" id="sizing-addon1") MAINPREVIEW
                      input(type="file" id='mainpreview' class="form-control" aria-describedby="sizing-addon1" name='mainpreview')
                    .input-group.input-group-lg(style='margin-bottom:5px;')
                      span(class="input-group-addon" id="sizing-addon1") XML
                      input(type="file" id='xml' class="form-control" aria-describedby="sizing-addon1" name='xml')
                    .input-group.input-group-lg(style='margin-bottom:5px;')
                      span(class="input-group-addon" id="sizing-addon1") XML OUT
                      input(type="file" id='xmlout' class="form-control" aria-describedby="sizing-addon1" name='xmlout')
                  input#imgqntt.form-control(style='display:none;',type='text', name='imgqnnt')
                  input#xmlqntt.form-control(style='display:none;',type='text', name='xmlqntt')
                  label(for='pano')  Панораму загружаем ?
                  input#pano.form-control(type='checkbox', name='pano')           
                  button(class='btn btn-primary',type='submit',style='margin-top:10px;margin-bottom:10px;border-radius:30px;') Добавить 
      script(src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js')       
      script.
        $('#new3').click(function(){$('#withdate').slideToggle();})
        $('#new').click(function(){$.post("/admin/simulateplace")}); 
        $('#new2').click(function(){$.post("/admin/simulateemptyplace")});
        var xmlcount = 0;
        var imgcount = 0;
        $('#addfield').click(function(){
        imgcount++;
        $('#imgqntt').val(imgcount);
        //$('#labels').append("<p id='"+imgcount+"sidelabel'><label  > "+imgcount+" IMAGE</label></p>")
        //$('#inputs').append("<label for='"+imgcount+"sidelabel'>"+imgcount+" IMAGE</label><input type='file' class='form-control'  id='"+imgcount+"side' name='images[]'>")
        $('#inputs').append("<div class='input-group input-group-lg' id='"+xmlcount+"xmllabel' style='margin-bottom:5px;'><span class='input-group-addon' id='sizing-addon1'>"+imgcount+" IMAGE</span><input type='file' id='xml' class='form-control' aria-describedby='sizing-addon1' id='"+imgcount+"side' name='images[]'></div>");
        });
        $('#addxmlfield').click(function(){
        xmlcount++;
        $('#xmlqntt').val(xmlcount);
        //$('#labels').append("<p style='background-color:#2c7095;' id='"+xmlcount+"xmllabel'><label style='color:white;' > "+xmlcount+" XML</label></p>")
        //$('#inputs').append("<input type='file' class='form-control'  id='"+xmlcount+"xml' name='xmls[]'>")
        $('#inputs').append("<div class='input-group input-group-lg' id='"+xmlcount+"xmllabel' style='margin-bottom:5px;'><span class='input-group-addon' id='sizing-addon1'>"+xmlcount+" XML</span><input type='file' id='xml' class='form-control' aria-describedby='sizing-addon1' id='"+xmlcount+"xml' name='xmls[]'></div>");
        //#xmlqntt and #addxmlfield must be created
        });
        $('#reset').click(function(){
        $('#labels').empty();
        $('#inputs').empty();
        imgcount=0;
        $('#imgqntt').val(imgcount);
        $('#labels').append("<p><label > MAINPREVIEW </label></p> <p><label > XML </label></p> <p><label > NUMBER OF IMAGES (DONT TOUCH) </label></p>");
        $('#inputs').append("<input type='file' class='form-control'  id='mainpreview' name='mainpreview'> <input type='file' class='form-control'  id='xml' name='xml'> <input type='text' class='form-control' id='imgqntt' name='imgqnnt'>");
        });
        $('#rmlast').click(function(){
        if (imgcount > 0) {
        var x = imgcount
        eval("$('#"+x+"side').remove(); $('#"+x+"sidelabel').remove() ");
        imgcount--;
        $('#imgqntt').val(imgcount);}
        else {}
        });
        $('#rmlastxml').click(function(){
        if (xmlcount > 0) {
        var x = xmlcount
        eval("$('#"+x+"xml').remove(); $('#"+x+"xmllabel').remove() ");
        xmlcount--;
        $('#xmlqntt').val(xmlcount);}
        else {}
        });                  
        
