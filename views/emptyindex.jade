doctype html(lang='en')
head
    meta(charset='utf-8')
    |     
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    |     
    meta(name='viewport', content='width=device-width, initial-scale=1')
    |     
    title Recent ones
    // Bootstrap
    link(href='/bootstrap/css/bootstrap.min.css', rel='stylesheet')
    // HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries
    // WARNING: Respond.js doesn't work if you view the page via file://
    //if lt IE 9
      script(src='https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js')
      |       
      script(src='https://oss.maxcdn.com/respond/1.4.2/respond.min.js')     
    style.
      @font-face {
      font-family:roboto-thin;
      src:url('/bootstrap/fonts/Roboto-Thin.ttf');
      }
      @font-face {
      font-family:high;
      src: url('/bootstrap/fonts/Attentica.ttf');
      }
      @font-face {
      font-family:br;
      src: url('/bootstrap/fonts/bebasneue_regular.ttf');
      }
      @font-face {
      font-family:bt;
      src: url('/bootstrap/fonts/bebasneue_thin.ttf');
      }
      body {
      min-width:768px;
      background-color:#ddd;
      }
      h5{
      letter-spacing:2px;
      text-transform:uppercase;
      margin-bottom:0px;
      color:white;
      font-family:roboto-thin;
      font-size:30px;
      margin-top:0px;
      }
      h2 {
      letter-spacing:2px;
      text-transform:uppercase;
      font-family:high;
      margin-bottom:0px;
      }
      h6{
      font-family:arial; 
      text-transform:uppercase;
      margin-top:0px;
      color:lightgrey;
      margin-bottom:0px;
      letter-spacing:2px;
      }
      #welcome {
      position:absolute;
      z-index:3000;
      width:100%;
      height:100%;
      -ms-background-color:lightblue;
      }
      .col-lg-4 {
      margin-bottom: 20px;
      text-align: center;
      }
      .form-signin {
      max-width: 330px;
      padding: 15px;
      margin: 0 auto;
      }
      textarea:hover, 
      input:hover, 
      textarea:active, 
      input:active, 
      textarea:focus, 
      input:focus,
      button:focus,
      button:active,
      button:hover
      {
          outline:0px !important;
          -webkit-appearance:none;
      }
  body
    script.
      if(screen.width < 414){
      window.location='http://m.recentones.com/';
      }
    nav(class="navbar navbar-inverse navbar-fixed-top",style='z-index:3001')
      .container
        .navbar-header
          a(class="navbar-brand" style='padding:5px;' href="/")
            img(alt="Logo",id='logo',src="/bootstrap/images/rl.png",height='40',width='40')
        .collapse.navbar-collapse#navbar-collapse-9
          ul(class='nav navbar-nav')
            li(class='active')
              a(href='#',style='font-family:high;font-size:20px;letter-spacing:2px;') Лента 
            li
              a(href='/top',style='font-family:high;font-size:20px;letter-spacing:2px;') Рейтинги 
            li
              a(href='/misc/1',style='font-family:high;font-size:20px;letter-spacing:2px;') Инфо 
    #wrap 
      #welcome
        #msg.container(style='margin-bottom:60px;')
          .row
            .col-xs-12(style='text-align:center;')
              h1(style='margin-top:25vh;font-size:45px;font-family:roboto-thin;letter-spacing:2px;text-transform:uppercase;') Новые места
              h1(style='margin-top:20px;font-size:45px;font-family:roboto-thin;letter-spacing:2px;text-transform:uppercase;') Виртуальные туры
              h1(style='margin-top:20px;font-size:45px;font-family:roboto-thin;letter-spacing:2px;text-transform:uppercase;') Рейтинги
            //
              .col-xs-4
                h1(style='color:white;margin-top:35vh;font-size:45px;font-family:high;') Новые места
              .col-xs-4
                h1(style='color:white;margin-top:35vh;font-size:45px;font-family:high;') Виртуальные туры
              .col-xs-4
                h1(style='color:white;margin-top:35vh;font-size:45px;font-family:high;') Рейтинги
          .row(style='margin-top:10px;')
            #trbl.col-xs-6.col-xs-offset-3

          .row  
            .col-xs-12(style='text-align:center;')
              form(class='form-signin') 
                input(type='email' id='mail' class='form-control' placeholder='chief@yandex.ru')
                button(type='button',id='mailsubmit',class='btn btn-lg btn-block',style='margin-top:20px;border-radius:30px;background-color:lightsalmon;border-color:lightsalmon;color:white')  Сообщите мне о запуске  
      .main.container(style='min-height:100vh;z-index:2;') 
        img(src='/bootstrap/images/bear.jpg',style='height:100vh;')
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js')
    script.
      if(screen.width == 768) {
        $('#insert').css('padding-top','15%');
      }
      $('#mailsubmit').click(mail);
      function mail() {
      function validateEmail(email) { 
       var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
       return re.test(email);
       }   
      request = new XMLHttpRequest();
      request.onreadystatechange = function () {
      var DONE = this.DONE || 4;
      if (this.readyState === DONE){
      var parsed = JSON.parse(request.responseText);
      if (parsed.trouble === 1)
      {//alert('Недействительный адрес, ошиблись?');
       $('#trbl').append('<div class="alert alert-danger" role="alert"> Недействительный адрес, ошиблись? </div>');
       }
      else {
       $('#msg').empty();
       $('#msg').append("<div class='row'><div class='col-xs-12' style='text-align:center;'><h1 style='color:white;margin-top:35vh;font-size:45px;font-family:roboto-thin;letter-spacing:2px;text-transform:uppercase;'> До связи !</h1></div></div>");
      }}
      };
      request.open('POST','/keepintouch', true);
      request.setRequestHeader('X-Requested-With', 'XMLHttpRequest');  // Tells server that this call is made for ajax purposes.
      request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      // THAT NEEDS TO BE CORRECTED. IT SUPPOSED TO CHECK FOR ALL THE OFFERS BUT SERVER SIDE DOESNT SUPPORT IT YET. AT LEAST CHANGE TO 'CALENDAR'
      request.send("cm="+$('#mail').val());  
      }

      