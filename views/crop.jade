doc
html(lang='en')
head
  meta(charset='utf-8')     
  meta(http-equiv='X-UA-Compatible', content='IE=edge')     
  meta(name='viewport', content='width=device-width, initial-scale=1')
  // The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags
  title INTPLOVE     
  link(rel='icon', href='', sizes='16x16', type='image/png')
  // Bootstrap
  link(href='/bootstrap/css/bootstrap.min.css', rel='stylesheet') 
  link(href="https://cdn.rawgit.com/fengyuanchen/cropper/v1.0.0/dist/cropper.min.css" rel="stylesheet") 
  meta(liber de amicitia est)
  // HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries
  // WARNING: Respond.js doesn't work if you view the page via file://
  //if lt IE 9
  script(src='https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js')
  script(src='https://oss.maxcdn.com/respond/1.4.2/respond.min.js')      

  style.
    body {
    width: 100%;
    height: 100%;
    font: 100%/1.4em 'Calibre Light', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    font-size:14;
    }
    #spin {
    margin-top:15%
    }
    .list {
    overflow:auto;
    min-height:500px;
    max-height:70vh;
    padding-top:20px;
    }
    @media (max-width: 767px) {
    #spin {
    margin-top:30%
    }
    .list {
      max-height:inherit;
    }
    .paddgroup {
    padding-left:25px;
    padding-right:25px;
    }
    #signup {
      background-color:#333;
    }
    }
    @media (max-width: 992px) {
    #spin {
    margin-top:20%
    }
    #booklist {
    border-bottom-left-radius:10px;
    }
    .things{
    padding-top:50px;
    }
    .list {
    padding-top:50px;
    }
    }
    .thin {
    height:85%;
    }
    .inleftblock {
    border-bottom:1px solid #eee;
    color:gray;
    -webkit-transition: background-color 0.3s ease;
    -moz-transition: background-color 0.3s ease;
    -o-transition: background-color 0.3s ease;
    transition: background-color 0.3s ease;
    }
    .btncorr {
    font-family:boldproxima;
    text-transform:uppercase;
    }
    #heyopen {
    -webkit-box-shadow: inset 0px 7px 17px -9px rgba(0,0,0,0.75);
    -moz-box-shadow: inset 0px 7px 17px -9px rgba(0,0,0,0.75);
    box-shadow: inset 0px 7px 17px -9px rgba(0,0,0,0.75);
    }
    .btn {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    }
    .btn-success {
    background-color:#23BBA7;
    border-color:#1FAB98;
    }
    .btn-success:hover {
    background-color:#1F9E8E;
    } 
    a:hover, a:focus, a:active {
      text-decoration:none !important;
      color:inherit !important;
    }
    .cpadding {
     padding-left:30px;
     padding-right:30px;
    }
    .txtleft {
      text-align:left;
    }
    dl {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    }
    dl dt,dd {
      margin-top:5px;
      margin-bottom:5px;
    }
    form {
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    }
    #cropresult {
        width:130px;
        height:130px;
    }
    .mini{
        margin:5px;
    }  
    .loader {
    margin: 60px auto;
    font-size: 10px;
    position: relative;
    text-indent: -9999em;
    border-top: 1.1em solid rgba(255, 255, 255, 0.2);
    border-right: 1.1em solid rgba(255, 255, 255, 0.2);
    border-bottom: 1.1em solid rgba(255, 255, 255, 0.2);
    border-left: 1.1em solid #ffffff;
    -webkit-transform: translateZ(0);
    -ms-transform: translateZ(0);
    transform: translateZ(0);
    -webkit-animation: load8 1.1s infinite linear;
    animation: load8 1.1s infinite linear;
    }
    .loader,
    .loader:after {
      border-radius: 50%;
      width: 10em;
      height: 10em;
    }
    @-webkit-keyframes load8 {
      0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
      }
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }
    @keyframes load8 {
      0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
      }
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }
    .btn-primary:focus, btn.primary:active, .btn-primary:hover {
        border-color:#2988DA;
        background-color:#2988DA;
      }
    .btn-primary{
        background-color:#2E98F3;
        border-color:#2E98F3;
      }
    .cropper-crop-box {
      max-width:600;
      max-height:600;
    }
    #target {
      height:100%;
    }
    #menu-toggle {
    background-color: transparent;
    border: none;
    position: absolute;
    top: 20px;
    left: 20px;
    color: #333;
    font-size: 30;
    }
    .btn {
      text-transform:uppercase;
      letter-spacing:2px;
    }
    button:focus,button:active {
     outline: none !important;
    }
  body(style='background-color:#fbfbfb;')
    .container(id='wait' style='background-color:rgba(0, 0, 0, 0.63);position:fixed;width:100%;height:100%;z-index:9999;')
      .row(id='spin') 
        .col-xs-12(style='text-align:center;')
          .loader
    .container-fluid#panel(style='padding-top:50px;min-height:100vh;background-color:white;')      
      .row
        .col-xs-12(id='targetbucket')
          img#target(src='#{imgsrc}',class='center-block' alt='[Jcrop Example]')
      .row
        .col-xs-12(style='text-align:center;padding-top:30px;')
          button(id='crop' class='btn btn-primary') Save

      script(src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js')
      //script(src="https://cdn.rawgit.com/fengyuanchen/cropper/v1.0.0/dist/cropper.min.js")  
      script(src='/js/bootstrap.min.js')
      script(src='/js/cropper.js')
      script.
        var x1,x2,y1,y2;
        $(window).load(function(){
          console.log('remove');
          $('#wait').css('display','none');
           $('#targetbucket > img').cropper({
             aspectRatio: 1,
             guides:false,
             center:true,
             scalable:false,
             zoomable:false,
             mouseWheelZoom:false,
             touchDragZoom:false,
             strict:true,
             minCropBoxWidth:300,
             minCropBoxHeight:300,
             maxCropBoxWidth:700,
             maxCropBoxHeight:700,
             crop: function(e) {
               // Output the result data for cropping image.
               x1=e.x;
               y1=e.y;
               //x2=e.width+e.x;
               //y2=e.height+e.y;
               x2=e.width;
               y2=e.height;
               console.log(e.x);
               console.log(e.y);
               console.log(e.width);
               console.log(e.height);
               console.log(e.rotate);
               console.log(e.scaleX);
               console.log(e.scaleY);
             }
           });
          });
        $('#crop').click(function(){
          $('#wait').css('display','block');
          var img = $('#target').attr('src');
          $.ajax({
           method: 'POST',
           url: '/userp/crop',
           data: {'x1': x1, 'x2': x2, 'y1': y1, 'y2': y2, 'img': img}
         }).done(function (data) {
             window.location='http://intplove.com/profile';
             });
          });


        
      